{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Alice/Desktop/vk4/who/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Alice/Desktop/vk4/who/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Alice\\\\Desktop\\\\vk4\\\\who\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import bridge from'@vkontakte/vk-bridge';import{useState,useEffect,useRef}from'react';import{Panel,Button,Div,Avatar,HorizontalCell}from'@vkontakte/vkui';import{ProgressBar}from'../progressBar/ProgressBar.js';import'./ChooseFriend.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function ChooseFriend(id){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),fetchedFriend=_useState2[0],setFriend=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPressed=_useState4[0],setIsPressed=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),completed=_useState6[0],setCompleted=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),disabled=_useState8[0],setDisabled=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),status=_useState10[0],setStatus=_useState10[1];var fetchFriends=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var friend;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return bridge.send('VKWebAppGetFriends');case 3:friend=_context.sent;setDisabled(false);setStatus('');setCompleted(0);setTimeout(function(){setFriend(friend.users[0]);},300);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchFriends(){return _ref.apply(this,arguments);};}();var loader=function loader(){setDisabled(true);setIsPressed(true);setCompleted(Math.floor(Math.random()*(100-1)));};useEffect(function(){if(completed){setTimeout(function(){completed<50?setStatus(dontLoveFriend):setStatus(loveFriend);},1500);}},[completed]);var name=fetchedFriend.first_name;var validName=name===null||name===undefined;var loveFriend='этого придется любить больше';var dontLoveFriend='это больше не наш друг';var FriendLies='врет, кажись. на 100% можно любить только картошечку';return/*#__PURE__*/_jsx(Div,{className:'Container',children:/*#__PURE__*/_jsx(Panel,{id:id,children:/*#__PURE__*/_jsxs(Div,{className:\"Container__choose\",children:[/*#__PURE__*/_jsx(Div,{className:\"Button__position\",children:/*#__PURE__*/_jsx(Button,{className:\"Button\",onClick:fetchFriends,\"data-to\":\"home\",appearance:'positive',stretched:false,size:'i ',sizey:'regular',children:\"\\u0432\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0434\\u0440\\u0443\\u0433\\u0430\"})}),validName?null:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Div,{className:\"Amount__love\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\" \",\"\\u043D\\u0430\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u043E, \".concat(name,\" \\u043B\\u044E\\u0431\\u0438\\u0442 \\u043A\\u043E\\u0442\\u0438\\u043A\\u043E\\u0432\")]})}),/*#__PURE__*/_jsx(Div,{className:\"Person\",children:/*#__PURE__*/_jsx(HorizontalCell,{size:\"s\",header:name,children:fetchedFriend.photo_200?/*#__PURE__*/_jsx(Avatar,{src:fetchedFriend.photo_200}):null})}),/*#__PURE__*/_jsx(Div,{className:\"Button__position\",children:/*#__PURE__*/_jsx(Button,{className:\"Button\",onClick:loader,appearance:'positive',size:'i',stretched:false,disabled:disabled,children:\"\\u0443\\u0437\\u043D\\u0430\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(ProgressBar,{completed:isPressed?completed:0}),status?/*#__PURE__*/_jsx(Div,{className:\"Status\",children:status}):null]})]})})});}","map":{"version":3,"names":["bridge","useState","useEffect","useRef","Panel","Button","Div","Avatar","HorizontalCell","ProgressBar","ChooseFriend","id","fetchedFriend","setFriend","isPressed","setIsPressed","completed","setCompleted","disabled","setDisabled","status","setStatus","fetchFriends","send","friend","setTimeout","users","console","log","loader","Math","floor","random","dontLoveFriend","loveFriend","name","first_name","validName","undefined","FriendLies","photo_200"],"sources":["C:/Users/Alice/Desktop/vk4/who/src/components/choosеFriend/СhooseFriend.js"],"sourcesContent":["import bridge from '@vkontakte/vk-bridge';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport {\r\n    Panel,\r\n    Button,\r\n    Div,\r\n    Avatar,\r\n    HorizontalCell\r\n} from '@vkontakte/vkui';\r\nimport { ProgressBar } from '../progressBar/ProgressBar.js';\r\nimport './ChooseFriend.css';\r\n\r\nexport function ChooseFriend(id) {\r\n    const [fetchedFriend, setFriend] = useState([]);\r\n    const [isPressed, setIsPressed] = useState(false);\r\n    const [completed, setCompleted] = useState(0);\r\n    const [disabled, setDisabled] = useState(false);\r\n    const [status, setStatus] = useState(null);\r\n\r\n\r\n    const fetchFriends = async () => {\r\n\r\n        try {\r\n            const friend = await bridge.send('VKWebAppGetFriends');\r\n            setDisabled(false);\r\n            setStatus('');\r\n            setCompleted(0);\r\n            setTimeout(() => {\r\n                setFriend(friend.users[0]);\r\n            }, 300);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n\r\n    const loader = () => {\r\n        setDisabled(true);\r\n        setIsPressed(true);\r\n        setCompleted(Math.floor(Math.random() * (100 - 1)));\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (completed) {\r\n            setTimeout(() => {\r\n                completed < 50\r\n                    ? setStatus(dontLoveFriend)\r\n                    : setStatus(loveFriend);\r\n            }, 1500);\r\n        }\r\n    }, [completed]);\r\n\r\n    const name = fetchedFriend.first_name;\r\n    const validName = name === null || name === undefined;\r\n    const loveFriend = 'этого придется любить больше';\r\n    const dontLoveFriend = 'это больше не наш друг';\r\n    const FriendLies = 'врет, кажись. на 100% можно любить только картошечку';\r\n\r\n    return (\r\n        <Div className={'Container'}>\r\n            <Panel id={id}>\r\n                <Div className='Container__choose'>\r\n                    <Div className='Button__position'>\r\n                        <Button\r\n                            className='Button'\r\n                            onClick={fetchFriends}\r\n                            data-to='home'\r\n                            appearance={'positive'}\r\n                            stretched={false}\r\n                            size={'i '}\r\n                            sizey={'regular'}\r\n                        >\r\n                            выбрать друга\r\n                        </Button>\r\n                    </Div>\r\n\r\n                    {validName ? null : (\r\n                        <>\r\n                            <Div className='Amount__love'>\r\n                                <h4> {`насколько, ${name} любит котиков`}</h4>\r\n                            </Div>\r\n\r\n                            <Div className='Person'>\r\n                                <HorizontalCell size='s' header={name}>\r\n                                    {fetchedFriend.photo_200 ? (\r\n                                        <Avatar src={fetchedFriend.photo_200} />\r\n                                    ) : null}\r\n                                </HorizontalCell>\r\n                            </Div>\r\n\r\n                            <Div className='Button__position'>\r\n                                <Button\r\n                                    className='Button'\r\n                                    onClick={loader}\r\n                                    appearance={'positive'}\r\n                                    size={'i'}\r\n                                    stretched={false}\r\n                                    disabled={disabled}\r\n                                >\r\n                                    узнать\r\n                                </Button>\r\n                            </Div>\r\n                            {\r\n                                <ProgressBar\r\n                                    completed={isPressed ? completed : 0}\r\n                                />\r\n                            }\r\n                            {status ? (\r\n                                <Div className='Status'>{status}</Div>\r\n                            ) : null}\r\n                        </>\r\n                    )}\r\n                </Div>\r\n            </Panel>\r\n        </Div>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}